(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/mine/order/order"],{7771:function(t,r,e){"use strict";(function(t,r){var n=e("4ea4");e("b9ca");n(e("66fd"));var u=n(e("b2e4"));t.__webpack_require_UNI_MP_PLUGIN__=e,r(u.default)}).call(this,e("bc2e")["default"],e("543d")["createPage"])},9459:function(t,r,e){},b2e4:function(t,r,e){"use strict";e.r(r);var n=e("ba47"),u=e("b9a0");for(var a in u)["default"].indexOf(a)<0&&function(t){e.d(r,t,(function(){return u[t]}))}(a);e("c37e");var c=e("f0c5"),o=Object(c["a"])(u["default"],n["b"],n["c"],!1,null,"0a9cd791",null,!1,n["a"],void 0);r["default"]=o.exports},b9a0:function(t,r,e){"use strict";e.r(r);var n=e("bf29"),u=e.n(n);for(var a in n)["default"].indexOf(a)<0&&function(t){e.d(r,t,(function(){return n[t]}))}(a);r["default"]=u.a},ba47:function(t,r,e){"use strict";e.d(r,"b",(function(){return n})),e.d(r,"c",(function(){return u})),e.d(r,"a",(function(){}));var n=function(){var t=this,r=t.$createElement,e=(t._self._c,t.orderList?t.__map(t.list,(function(r,e){var n=t.__get_orig(r),u=4!=t.current?t._f("statusText")(r.order.status):null,a=4!=t.current?t.__map(r.items,(function(r,e){var n=t.__get_orig(r),u=t._f("formatArr")(r.productAttr);return{$orig:n,f1:u}})):null,c=4==t.current?t.__map(t.returnList,(function(r,e){var n=t.__get_orig(r),u=t._f("orderProcessText")(r.status),a=t._f("formatArr")(r.productAttr);return{$orig:n,f2:u,f3:a}})):null;return{$orig:n,f0:u,l0:a,l1:c}})):null);t.$mp.data=Object.assign({},{$root:{l2:e}})},u=[]},bf29:function(t,r,e){"use strict";(function(t){var n=e("4ea4");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var u=n(e("2eee")),a=n(e("c973")),c=e("f536"),o=e("0bfe"),i={data:function(){return{current:0,orderList:"",returnList:"",tabList:[{id:1,text:"待付款"},{id:2,text:"已付款"},{id:3,text:"已发货"},{id:4,text:"已收货"},{id:5,text:"售后"}]}},onLoad:function(){this.getfindAllOrders(),this.getorderReturnApplys()},filters:{formatArr:function(t){var r="";try{var e=JSON.parse(t);e.forEach((function(t){r+=","+t.key+":"+t.value})),r=r.substring(1)}catch(n){return t}return r},statusText:function(t){return 0==t?"未付款":1==t?"确认付款,等待发货":2==t?"已发货":3==t?"已收货":4==t?"已退单":"无效订单"},orderProcessText:function(t){var r="等待处理";switch(JSON.stringify(t)){case"0":r="等待处理";break;case"1":r="确认退货,等待用户发货";break;case"2":r="已退款";break;case"3":r="已拒绝";break;case"9":r="拒绝退货";break;default:break}return r}},computed:{list:function(){var t=this;return 3==this.current?this.orderList.filter((function(r){return r.order.status==t.current||4==r.order.status})):this.orderList.filter((function(r){return r.order.status==t.current}))}},methods:{tabChange:function(t){this.current=t},getfindAllOrders:function(){var t=this;return(0,a.default)(u.default.mark((function r(){var e;return u.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,(0,c.findAllOrders)();case 2:e=r.sent,console.log("findAllOrders",e),t.orderList=e.data.orderList;case 5:case"end":return r.stop()}}),r)})))()},getorderReturnApplys:function(){var t=this;return(0,a.default)(u.default.mark((function r(){var e;return u.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,(0,c.orderReturnApplys)();case 2:e=r.sent,console.log("returnOrder",e),t.returnList=e.data.items;case 5:case"end":return r.stop()}}),r)})))()},cancel:function(t){var r=t,e=(0,c.cancelOrder)(r);console.log("cancelOrder",e)},buy:function(r){return(0,a.default)(u.default.mark((function e(){var n,a;return u.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=r,e.next=3,(0,o.addPreorder)({orderItemList:[{cartId:n.items[0].cartId,productId:n.items[0].productId,productQuantity:n.items[0].productQuantity,productSkuId:n.items[0].productSkuId}]});case 3:a=e.sent,a.success&&(t.showToast({title:"1s后跳转至订单确认页"}),setTimeout((function(){return t.navigateTo({url:"/pages/confirmOrder/confirmOrder?id=".concat(a.data.orderId)})}),1e3)),console.log("addPreorder",a);case 6:case"end":return e.stop()}}),e)})))()}}};r.default=i}).call(this,e("543d")["default"])},c37e:function(t,r,e){"use strict";var n=e("9459"),u=e.n(n);u.a}},[["7771","common/runtime","common/vendor"]]]);